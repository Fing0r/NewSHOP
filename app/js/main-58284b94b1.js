"use strict";function DynamicAdapt(e){this.type=e}DynamicAdapt.prototype.init=function(){var e=this,t=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=document.querySelectorAll("[data-da]");for(var i=0;i<this.nodes.length;i++){var n=this.nodes[i],a=n.dataset.da.trim().split(","),s={};s.element=n,s.parent=n.parentNode,s.destination=document.querySelector(a[0].trim()),s.breakpoint=a[1]?a[1].trim():"767",s.place=a[2]?a[2].trim():"last",s.index=this.indexInParent(s.parent,s.element),this.оbjects.push(s)}this.arraySort(this.оbjects),this.mediaQueries=Array.prototype.map.call(this.оbjects,(function(e){return"("+this.type+"-width: "+e.breakpoint+"px),"+e.breakpoint}),this),this.mediaQueries=Array.prototype.filter.call(this.mediaQueries,(function(e,t,i){return Array.prototype.indexOf.call(i,e)===t}));for(var o=function(i){var n=e.mediaQueries[i],a=String.prototype.split.call(n,","),s=window.matchMedia(a[0]),o=a[1],r=Array.prototype.filter.call(e.оbjects,(function(e){return e.breakpoint===o}));s.addListener((function(){t.mediaHandler(s,r)})),e.mediaHandler(s,r)},r=0;r<this.mediaQueries.length;r++)o(r)},DynamicAdapt.prototype.mediaHandler=function(e,t){if(e.matches)for(var i=0;i<t.length;i++){var n=t[i];n.index=this.indexInParent(n.parent,n.element),this.moveTo(n.place,n.element,n.destination)}else for(var a=t.length-1;a>=0;a--){var s=t[a];s.element.classList.contains(this.daClassname)&&this.moveBack(s.parent,s.element,s.index)}},DynamicAdapt.prototype.moveTo=function(e,t,i){t.classList.add(this.daClassname),"last"===e||e>=i.children.length?i.insertAdjacentElement("beforeend",t):"first"!==e?i.children[e].insertAdjacentElement("beforebegin",t):i.insertAdjacentElement("afterbegin",t)},DynamicAdapt.prototype.moveBack=function(e,t,i){t.classList.remove(this.daClassname),void 0!==e.children[i]?e.children[i].insertAdjacentElement("beforebegin",t):e.insertAdjacentElement("beforeend",t)},DynamicAdapt.prototype.indexInParent=function(e,t){var i=Array.prototype.slice.call(e.children);return Array.prototype.indexOf.call(i,t)},DynamicAdapt.prototype.arraySort=function(e){"min"===this.type?Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:e.place-t.place:e.breakpoint-t.breakpoint})):Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:t.place-e.place:t.breakpoint-e.breakpoint}))};var da=new DynamicAdapt("max");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}da.init();var randomColor,subBtn,body,Modal=function(){function e(t){_classCallCheck(this,e);this.options=Object.assign({isOpen:function(){},isClose:function(){}},t),this.modal=document.querySelector(".modal"),this.speed=300,this.animation="fade",this._reOpen=!1,this._nextContainer=!1,this.modalContainer=!1,this.isOpen=!1,this.previousActiveElement=!1,this._focusElements=["a[href]","input","select","textarea","button","iframe","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this._fixBlocks=document.querySelectorAll(".fix-block"),this.events()}return _createClass(e,[{key:"events",value:function(){this.modal&&(document.addEventListener("click",function(e){var t=e.target.closest("[data-path]");if(t){var i=t.dataset.path,n=t.dataset.animation,a=t.dataset.speed;return this.animation=n||"fade",this.speed=a?parseInt(a):300,this._nextContainer=document.querySelector('[data-target="'.concat(i,'"]')),void this.open()}e.target.closest(".modal-close")&&this.close()}.bind(this)),window.addEventListener("keydown",function(e){27==e.keyCode&&this.isOpen&&this.close(),9==e.which&&this.isOpen&&this.focusCatch(e)}.bind(this)),this.modal.addEventListener("click",function(e){e.target.classList.contains("modal__container")||e.target.closest(".modal__container")||!this.isOpen||this.close()}.bind(this)))}},{key:"open",value:function(e){var t=this;if(this.previousActiveElement=document.activeElement,this.isOpen)return this.reOpen=!0,void this.close();this.modalContainer=this._nextContainer,e&&(this.modalContainer=document.querySelector('[data-target="'.concat(e,'"]'))),this.modal.style.setProperty("--transition-time","".concat(this.speed/1e3,"s")),this.modal.classList.add("is-open"),this.disableScroll(),this.modalContainer.classList.add("modal-open"),this.modalContainer.classList.add(this.animation),setTimeout((function(){t.options.isOpen(t),t.modalContainer.classList.add("animate-open"),t.isOpen=!0,t.focusTrap()}),this.speed)}},{key:"close",value:function(){this.modalContainer&&(this.modalContainer.classList.remove("animate-open"),this.modalContainer.classList.remove(this.animation),this.modal.classList.remove("is-open"),this.modalContainer.classList.remove("modal-open"),this.enableScroll(),this.options.isClose(this),this.isOpen=!1,this.focusTrap(),this.reOpen&&(this.reOpen=!1,this.open()))}},{key:"focusCatch",value:function(e){var t=this.modalContainer.querySelectorAll(this._focusElements),i=Array.prototype.slice.call(t),n=i.indexOf(document.activeElement);e.shiftKey&&0===n&&(i[i.length-1].focus(),e.preventDefault()),e.shiftKey||n!==i.length-1||(i[0].focus(),e.preventDefault())}},{key:"focusTrap",value:function(){var e=this.modalContainer.querySelectorAll(this._focusElements);this.isOpen?e.length&&e[0].focus():this.previousActiveElement.focus()}},{key:"disableScroll",value:function(){var e=window.scrollY;this.lockPadding(),document.body.classList.add("disable-scroll"),document.body.dataset.position=e,document.body.style.top=-e+"px"}},{key:"enableScroll",value:function(){var e=parseInt(document.body.dataset.position,10);this.unlockPadding(),document.body.style.top="auto",document.body.classList.remove("disable-scroll"),window.scrollTo({top:e,left:0}),document.body.removeAttribute("data-position")}},{key:"lockPadding",value:function(){var e=window.innerWidth-document.body.offsetWidth+"px";this._fixBlocks.forEach((function(t){t.style.paddingRight=e})),document.body.style.paddingRight=e}},{key:"unlockPadding",value:function(){this._fixBlocks.forEach((function(e){e.style.paddingRight="0px"})),document.body.style.paddingRight="0px"}}]),e}(),modal=new Modal,sliderFormat=document.getElementById("slider-format"),inputFormat=document.getElementById("input-format"),surveyBtns=document.querySelectorAll(".survey__btn"),stepperInputs=document.querySelectorAll(".survey__field"),stepperRange=document.querySelectorAll(".survey__range"),sliderYear=document.getElementById("slider-year"),inputYear=document.getElementById("input-year"),inputYearClass=document.querySelector(".survey__item--duration"),inputYearSpan=document.querySelector(".survey__item--duration span");if(sliderFormat){var getTextWidth=function e(t,i){var n=(e.canvas||(e.canvas=document.createElement("canvas"))).getContext("2d");return n.font=i,n.measureText(t).width},elWidth=function(e,t,i){e.style.width="".concat(getTextWidth(t,i)+5,"px")};noUiSlider.create(sliderFormat,{start:[5e5],step:5e4,range:{min:[5e5],max:[1e7]},format:wNumb({decimals:0,thousand:" "})}),stepperInputs.forEach((function(e){e.addEventListener("keypress",(function(e){!function(e){var t=e.which?e.which:e.keyCode;(13===t||t>31&&(t<48||t>57))&&e.preventDefault()}(e)}))})),noUiSlider.create(sliderYear,{start:[0],step:1,range:{min:[0],max:[5]},format:wNumb({decimals:0})}),sliderYear.noUiSlider.on("update",(function(e,t){inputYear.value=e[t];var i=parseInt(e[t]);setTimeout(window.onload=function(){elWidth(inputYear,e[t],"bold 20px Geometria")},100),elWidth(inputYear,e[t],"bold 20px Geometria"),inputYearSpan.textContent=1===i?" год":0===i||5===i?" лет":" года",surveyBtns.forEach((function(e){0===i?e.setAttribute("disabled","")||e.setAttribute("aria-label","не активна, выберите срок инвестиций")||e.classList.add("survey__btn--disable"):e.removeAttribute("disabled")||e.removeAttribute("aria-label")||e.classList.remove("survey__btn--disable")}))})),inputYear.addEventListener("change",(function(){sliderYear.noUiSlider.set(this.value)})),sliderFormat.noUiSlider.on("update",(function(e,t){inputFormat.value=e[t],setTimeout(window.onload=function(){elWidth(inputFormat,e[t],"bold 20px Geometria")},100),elWidth(inputFormat,e[t],"bold 20px Geometria")})),inputFormat.addEventListener("change",(function(){sliderFormat.noUiSlider.set(this.value)})),stepperInputs.forEach((function(e){e.addEventListener("keyup",(function(e){var t=e.currentTarget;elWidth(t,t.value,"bold 20px Geometria")}))}))}var surveySel=document.querySelector(".survey__select");if(surveySel){var defaultSelect=function(){new Choices(surveySel,{searchEnabled:!1,placeholder:!1,position:"bottom"})};defaultSelect()}var examplesSlider=document.querySelector(".examples__slider");if(examplesSlider)var examplesSliders=new Swiper(examplesSlider,{wrapperClass:"examples__list",slideClass:"examples__slide",slideNextClass:"examples__slide--next",slidePrevClass:"examples__slide--prev",slideActiveClass:"examples__slide--active",slideDuplicateClass:"examples__slide--dupl",loop:!0,navigation:{nextEl:".arrow--next",prevEl:".arrow--prev"},pagination:{el:".examples__fraction",currentClass:"fraction__current",type:"fraction"},breakpoints:{320:{slidesPerView:1,spaceBetween:50},556:{slidesPerView:1,spaceBetween:100},768:{slidesPerView:1,spaceBetween:87},1024:{slidesPerView:2,spaceBetween:30},1200:{slidesPerView:2},1400:{slidesPerView:2}}});var tesimonialsSlider=document.querySelector(".testimonials__slider");if(tesimonialsSlider)var tesimonialsSliders=new Swiper(tesimonialsSlider,{wrapperClass:"testimonials__list",slideClass:"testimonials__slide",slideNextClass:"testimonials__slide--next",slideActiveClass:"testimonials__slide--active",loop:!0,slidesPerView:1,spaceBetween:80,navigation:{nextEl:".arrow--next",prevEl:".arrow--prev"},pagination:{el:".testimonials__fraction",currentClass:"fraction__current",type:"fraction"},breakpoints:{576:{slidesPerView:1.5,spaceBetween:15},768:{slidesPerView:1.8,spaceBetween:15},1024:{spaceBetween:15,slidesPerView:3}}});function spanPercent(){document.querySelectorAll(".apartment-card__percent").forEach((function(e){var t=e.getAttribute("data-per").match(/\d+/);e.previousElementSibling.querySelector("span").style.height=t+"%"}))}spanPercent(),document.querySelectorAll(".politics__descr").forEach((function(e){new SimpleBar(e)})),AOS.init({once:!0,duration:1e3});var tabItem=document.querySelectorAll(".dynamics__tab"),tabItemParent=document.querySelectorAll(".dynamics__item"),tabBtn=document.querySelector(".dynamics__btn"),tabActive=document.querySelector(".dynamics__tab--active"),tabList=document.querySelector(".dynamics__list"),tabDynamics=document.querySelectorAll(".dynamics-tabs__tab");tabBtn&&(tabBtn.addEventListener("click",(function(){tabList.classList.toggle("dynamics__list--active"),tabBtn.classList.toggle("dynamics__btn--active")})),tabBtn.innerHTML=tabActive.textContent,tabActive.closest(".dynamics__item").classList.add("dynamics__item--hidden"),tabItem.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),t.target.classList.contains("dynamics__tab");var i=t.target.getAttribute("href").replace("#","");tabItem.forEach((function(e){e.classList.remove("dynamics__tab--active"),t.target.classList.add("dynamics__tab--active")})),tabDynamics.forEach((function(e){e.classList.remove("dynamics-tabs__tab--active"),document.getElementById(i).classList.add("dynamics-tabs__tab--active")})),setTimeout(t.target.classList.contains("dynamics__tab--active"),100)?(tabItem.forEach((function(e){e.closest(".dynamics__item").classList.remove("dynamics__item--hidden")})),tabBtn.innerHTML=e.textContent,e.closest(".dynamics__item").classList.add("dynamics__item--hidden"),tabList.classList.remove("dynamics__list--active"),tabBtn.classList.remove("dynamics__btn--active")):console.log(error)}))})),document.addEventListener("click",(function(e){e.target.closest(".dynamics__list")||e.target.closest(".dynamics__btn")||(tabList.classList.remove("dynamics__list--active"),tabBtn.classList.remove("dynamics__btn--active"))})));var politicsBody=document.querySelector(".politics"),backCallBtn=document.querySelector(".back-call__politics"),footerPoliticsBtn=document.querySelector(".footer__politics");function getPoliticsTitleHeight(){var e=document.querySelector(".politics__descr"),t=document.querySelector(".politics__title"),i=parseInt(getComputedStyle(t).getPropertyValue("margin-bottom"));setTimeout((function(){var n=t.offsetHeight+i;e.style.setProperty("--element-offset",n+"px")}),0)}null==backCallBtn||backCallBtn.addEventListener("click",getPoliticsTitleHeight),null==footerPoliticsBtn||footerPoliticsBtn.addEventListener("click",getPoliticsTitleHeight),window.addEventListener("resize",(function(){getPoliticsTitleHeight()}));var interval=fontLoadListener();function fontLoadListener(){var e=!1;try{e=!0}catch(e){return console.info("CSS font loading API error",e),void fontLoadedSuccess()}e&&fontLoadedSuccess()}function fontLoadedSuccess(){if(clearInterval(interval),document.querySelector(".specialists__more")){var e=getComputedStyle(document.querySelector(".specialists__list",null)),t=document.querySelector(".specialists__more"),i=parseInt(e.getPropertyValue("--list-gap")),n=new Masonry(document.getElementById("masonry"),{responsive:{0:{columns:1,gap:i,maxItem:2},768:{columns:2,gap:i,maxItem:4},1024:{columns:3,gap:i,maxItem:6},1300:{columns:4,gap:i,maxItem:4}}});t.addEventListener("click",(function(e){e.preventDefault,n.flag=2,n.setParameters(),t.style.display="none"}))}}